\documentclass{standalone}
\usepackage{magic}
\usepackage{standalone}
\usetikzlibrary{patterns, decorations.pathreplacing}

\begin{document}
\begin{tikzpicture} [
	node distance=2.5cm and 0cm,
	]
	\node (tlsI) 	[rect] {Magic I};
	\node (tlsII) [rect, right of=tlsI] {Magic II};

	\node (MCD) 	[circ, below of=tlsI, xshift=1.25cm] {MC};
	\node (OND) 	[circ, left of=MCD] {On};
	\node (OFFD) 	[circ, right of=MCD] {Off};
	\node (NMCD)  [info, text width= 2cm, above of=MCD ,yshift=-1.7cm]
		{Zenith, Ringwobble, Diffuse};

	\node (Star) 	[rect, below of=MCD] {Star};

	\node (Sstar) [rect, below of=Star] {Superstar};
	
	\node (quate) [rect, below of=Sstar] {quate};
	
	\node (CMCD) 	[circ, below of=quate] {MC};
	\node (COND) 	[circ, left of=CMCD] {On};
	\node (COFFD) [circ, right of=CMCD] {Off};
	
	\node (coach) [rect, below of=CMCD, xshift=1.25cm] {coach};
	
	\node (melibea) [rect, below of=coach, xshift=-1.25cm] {Melibea};
	
	\node (caspar) [rect, below of=melibea] {Caspar};
	\node (odie) [rect, left of=caspar] {Odie};
	\node (flute) [rect, right of=caspar] {Flute};

	\node (unfold) [rect, below of=flute] {CombUnfold};

	\draw[-Stealth, sArrow] (tlsI.south) 	--  (OND.north);
	\draw[-Stealth, sArrow] (tlsI.south) 	-- 	(OFFD.north); 
	\draw[-Stealth, sArrow] (tlsII.south) -- 	(OND.north);
	\draw[-Stealth, sArrow] (tlsII.south) -- 	(OFFD.north);

	\draw[-Stealth, sArrow] (OND.south) 	-- 	(Star.north);
	\draw[-Stealth, sArrow] (OFFD.south) 	-- 	(Star.north);
	\draw[-Stealth, sArrow] (MCD.south) 	-- 	(Star.north);

	\draw[-Stealth, sArrow] (Star.south) 	-- 	(Sstar.north);
	
	\draw[-Stealth, sArrow] (Sstar.south) -- (quate.north);
	
	\draw[-Stealth, sArrow] (quate.south) -- (CMCD.north);
	\draw[-Stealth, sArrow] (quate.south) -- (COND.north);
	\draw[-Stealth, sArrow] (quate.south) -- (COFFD.north);

	% \node [infocirc, draw=black, text=black, above of=coach, yshift=-1.0cm] {2};
	
	\draw[-Stealth, sArrow] (COFFD.south) -- (coach.north);
	\draw[-Stealth, sArrow, draw=black!40] (CMCD.south) -- 
		node [sloped, above, text=black!70] {train} (coach.north);
	\draw[-Stealth, sArrow, draw=black!70] (CMCD.south) --  
		node [sloped, above, text=black!70] {test} (melibea.north);
	\draw[-Stealth, sArrow] (COND.south) -- (melibea.north);
	\draw[-Stealth, sArrow] (coach.south) -- 	(melibea.north);

	\draw[-Stealth, sArrow] (melibea.south) -- 	(odie.north);
	\draw[-Stealth, sArrow] (melibea.south) 	-- 	(caspar.north);
	\draw[-Stealth, sArrow] (melibea.south) 	-- 	(flute.north);

	\draw[-Stealth, sArrow] (flute.south) 	-- 	(unfold.north);
	\path[-Stealth, sArrow, out=270, in=260, looseness=1.5] 
		(odie.south) edge node [loop below] {PSF, $\theta^2$-cut} 
		(caspar.220);

	\node (theta) 	[shape=circle, draw=mblue, right of=Star, 
	path picture={
		\node at (path picture bounding box.center){
              \includegraphics[width=3cm]{theta2}
					};
				}, line width=1, minimum width=3.5cm, xshift=1cm] {};
	
	\node (hillas) 	[shape=circle, draw=mblue, left of=Sstar, 
	path picture={
		\node at (path picture bounding box.center){
              \includegraphics[width=2.5cm]{hillas}
					};
				}, line width=1, minimum width=3.5cm, xshift=-1cm] {};
	
	\path[-Stealth, sArrow, out=270, in=0, looseness=0.9] (theta.south) edge (Sstar.east);
	\path[-Stealth, sArrow, out=90, in=180, looseness=0.8] (hillas.north) edge
	(Star.west);
\end{tikzpicture}
\end{document}
