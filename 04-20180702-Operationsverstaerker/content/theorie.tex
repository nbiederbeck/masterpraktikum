\section{Theorie}\label{sec:theorie}
Mit dem Operationsverstärker lassen sich Ausgangsspannungen $U_A$
erzeugen welche in einem Bereich proportional zur Differenz der beiden
angelegten Eingangsspannungen ist. 
Ziel des Versuches ist es, verschiedene Schaltungen mittels eines
Operationsverstärker zu realisieren und die Unterschiede zwischen eines idealen
und realen Operationsverstärkers zu veranschaulichen.

\subsection{Idealer Operationsverstärker}%
\label{sub:idealer_operationsverstaerker}

\begin{wrapfigure}{l}{0.4\textwidth}
		\centering
		\includegraphics[width=\linewidth]{./build/operationsverstaerker.pdf}
		\caption{Schaltbild eines idealen Operationsverstärkers.
		\cite{anleitung}}
		\label{fig:opv}
\end{wrapfigure}
In einem Schaltbild wird ein Operationsverstärker durch ein gleichseitiges
Dreieck gekennzeichnet. 
An diesem werden zwei Eingangsspannungen angelegt, wobei die
Eingangsspannungen $U_\text{p}$ in Phase
und $U_\text{n}$ in Gegenphase zur Ausgangsspannung
$U_\text{a}$ ist.
Der Eingang $U_\text{p}$ wird aufgrund seiner Phasenbeziehung zur Ausgangsspannung
als nicht-invertierender und $U_\text{n}$ als invertierender Eingang bezeichnet. 
Im linearen Aussteuerungsbereich verstärkert der Operationsverstärker die
Differenz zwischen den beiden Eingängen mit dem Verstärkungsfaktor $V$ linear
\begin{equation}
		\label{eq:diff}
		U_\text{a} = V \left( U_\text{p} - U_\text{n} \right)
\end{equation}
wohinauf die Ausgangsspannung bei größeren Eingangsspannung gegen einen
Sättigungwert strebt.
Der Verstärkungsfaktor ist durch die Betriebspannung festgelegt
und bildet den Sättigungswert $\pm U_\text{B}$  des Linearverstärkers.
In Abbildung \ref{fig:kennlinie} ist eine beispielhafte Kennlinie eines
Operationsverstärkers zu sehen. 
\begin{figure}[h]
		\centering
		\includegraphics[width=0.5\linewidth]{build/aussteuerungsbereich.pdf}
		\caption{Kennlinie eines Operationsverstaerkers. \cite{anleitung}}
		\label{fig:kennlinie}
\end{figure}
Für den idealen Operationsverstärker werden die Annahmen getroffen, dass der
Verstärkungsfaktor $V = \infty$, der Eingangs-Widerstand $r_\text{e} =
\infty$ und der Ausgangs-Widerstand $r_\text{a} = 0$ ist.
Die Annahmen des idealen Operationsverstärkers beschreiben aber nur begrenzt
die Realität, weswegen Korrekturterme eingeführt werden. 

\subsection{Realer Operationsverstärker}%
\label{sub:realer_operationsverstaerker}

Zur Beschreibung eines realen Operationsverstärkers müssen noch Korrekturterme 
eingeführt werden, welche beim idealen verschwinden. 
Wird auf beiden Eingängen dieselbe Spannung $U_\text{Gl}$ angelegt, so
verschwindet nach Formel (\ref{eq:diff}) die Ausgangsspannung beim idealen
Operationsverstärker. 
Beim Realen werden aufgrund von Unsymmetrien dennoch Spannungen gemessen so, dass
sich die Gleichtaktverstärkung 
\begin{equation}
		V_\text{Gl} = \frac{\Delta U_\text{A}}{\Delta U_\text{Gl}}
\end{equation}
definiert werden kann.
Ebenso sind die Eingangs-Widerstände endlich, sodass es zu Eingangsströmen auf
den beiden Eingängen $I_\text{p}$ und $I_\text{n}$ kommt.
Der Offset-Strom wird als die Differenz beider Ströme definiert 
\begin{equation}
		I_0 = I_\text{p} - I_\text{n}
\end{equation}
wenn beide Eingangsspannungen verschwinden. 
Der Eingangsruhestrom $I_\text{B}$ ergibt sich aus dem Mittel der beiden Eingangsströme.
Für den Fall das eine Eingangsspannung $U_{i}$ verschwindet ergibt sich der
Differenzeingangs-Widerstand $r_\text{D}$ zu
\begin{equation}
		r_\text{D} = \frac{\Delta U_\text{i}}{\Delta I_\text{i}} \hspace{2cm} U_\text{j} = 0 
\end{equation}
wobei $i,j \in p,n$ und $i \neq j$.
Der Gleichtakt-Eingangswiderstand ist definiert über die Gleichtaktsspannung
$U_\text{GL}$ und dem Gleichtaktsstrom $I_\text{Gl} = I_\text{p} + I_\text{n}$.
Die Offset-Spannung $U_0$ ist die Spannungdifferenz um die die Eingänge
verschoben werden müssen damit die Ausgangsspannung $U_\text{a}$ verschwindet.
\begin{equation}
		U_0 = U_\text{p} - U_\text{n}
\end{equation}

\subsection{Linearverstärker}%
\label{sub:linearverstaerker}
Aufgrund des schmalen Aussteuerungsberreich sind Linearverstärker passe nur
begrenzt einsetzbar.
Zur Verbreiterung des Aussteuerungsbereich der Operationsverstärker mit einem 
ein Gegenkopplungzweig beschaltet.
\begin{figure}[h]
		\centering
		\includegraphics[width=0.5\linewidth]{build/linearverstaerker.pdf}
		\caption{Gegengekoppelter Linearverstärker \cite{anleitung}}
		\label{fig:lin}
\end{figure}
Dabei wird ein Teil der Ausgangsspannung über den Widerstand $R_\text{n}$ über
den Gegenkopplungszweig zum invertierten Eingang zurück gegeben. 
Dadurch lässt sich eine Zunahme des Aussteuerungsberreich erreichen, wobei die
Gesamtverstärkung $V'$ abnimmt.
Bei großen Leerlaufverstärkungen ist die Spannung $U_\text{n}$ gering, sodass
sich nach dem ersten Kirchhoff'schen Gesetz für den Knoten A
\begin{equation}
		\frac{U_1}{R_1} + \frac{U_\text{A}}{R_\text{n}} = 0
\end{equation}
der Strom Verschwinden muss. 
Aus dem Verhältnis der Eingangs $U_1$ zur Ausgangsspannung $U_\text{A}$ ergibt
sich der Verstärkungsfaktor.
\begin{equation}
		V' = - \frac{R_\text{N}}{R_1}
\end{equation}
Die Verstärkung ist im Idealfall nur von dem Verhältnis der beiden
Widerstände abhängig. 
Im real Fall besehen noch Abhängigkeit zwischen der Leerlaufverstärkung, den
Eingangs- und Ausgangs-Widerständen usw. 
Für einen unbelasteten Spannungsteiler ($I_\text{n} = 0$) gilt dass bei einem
endlichen Leerlaufverstärkungsfaktor
\begin{equation}
		U_\text{N} = \frac{U_\text{A}}{V}	
\end{equation}
Anhand der 1 Kirchhoff'schen Regel gilt für den Punkt $A$
\begin{equation}
		\frac{U_\text{N}-U_1}{U_\text{a}-U_1} = \frac{R_1}{R_1 + R_n}
\end{equation}
Daraus resultiert für den Verstärkungsfaktor 
\begin{equation}
		\frac{1}{V'}= - \frac{U_1}{U_\text{A}} = \frac{1}{V} +
		\frac{R_1}{R_\text{N}} \left( a + \frac{1}{V} \right) \approx
		\frac{1}{V} + \frac{R_1}{R_\text{N}}
\end{equation}
sodass bei der Wahl von $R_\text{n}/ R_\text{1}$ viel kleiner als die
Leerlaufverstärkung $V$ ein idealer Operationsverstärker erhält mit einer
geringerem Verstärkungsgrad, wobei der Verstärkungsfaktor nur vom Verhältnis
der Widerstände abhängt.
Desweiteren wird durch die Gegenkopplung die Stabilität der
Verstärkerschaltung erhöht, sowie der Ausgangs-Widerstand um ein $g$-faches
verkleinert.
\begin{equation}
		g := \frac{V}{V'}
\end{equation}
Äquivalent wird die Leerlaufverstärkung vermindert.
\begin{equation}
		\frac{\Delta V'}{V'} = \frac{\Delta V}{g V}
\end{equation}
Ebenso nimmt die Bandbreite für große g zu, sodass aufgrund eines großeren
Frequenzbandes mehr Frequenzen unverzerrt verstärkt werden können.
Bildet das Produkt aus Verstärkung und Bandbreite eine Konstante wird dies
durch die Transitfrequenz charakterisiert.
\begin{figure}[h]
		\centering
		\includegraphics[width=0.5\linewidth]{build/frequenz_lin.pdf}
		\caption{\cite{anleitung}}
		\label{fig:freq}
\end{figure}
Dies ist die Frequenz bei dem die Verstärkung den Wert eins annimmt.
Eine charakteristische Bandbreite eines Operationsverstärkers ist in Abbildung
\ref{fig:freq} zu sehen.

\subsection{Tiefpass}%
\label{sub:tiefpass}

Der Verstärkungsfaktor des Operationsverstärkers aufgetragen gegen die Frequenz bildet ein typischen
Tiefpass.
Bei diesem werden hohe Frequenzen stark gedämpft. 
Beispielhaft ist in Abbildung \ref{fig:tiefpass} ein Tiefpass erster Ordnung
dargestellt.
\begin{figure}[h]
		\centering
		\includegraphics[width=0.5\linewidth]{build/tiefpass.pdf}
		\caption{Denkbar einfachster Tiefpass erster Ordnung. \cite{wiki}}
		\label{fig:tiefpass}
\end{figure}
Unter Berücksichtigung der Maschenregel lässt sich der Verstärkungs- bzw.
Dämpfungs-Faktor des Tiefpass ausdrücken. 
Dazu wird das Verhältnis aus $U_a$ zu $U_e$ gebildet woraus sich der
Blindwiderstand $H$ ergibt.
\begin{equation}
		\label{eq:blindwiederstand}
		H = \frac{Z_\text{C}}{Z_\text{C} + R} 
\end{equation}
Der Blindwiderstand $H$ ist eine Funktion der Wechselspannungfrequenz $\omega$
und dessen Realteil entspricht 
\begin{align}
		\label{eq:h_betrag}
		\Re(H(\omega))  &= \Re \left(\frac{\sfrac{1}{j \omega C}}{\sfrac{1}{j\omega 
		C} + R} \right) \\
								 &= \frac{1}{\sqrt{1 + (\omega CR)^2}}
\end{align}
dem 'Ersatzwiderstand'.
Für Frequenzen $w > \sfrac{1}{RC}$ wird die Eingangsspannung stark gedämpft und bildet
die abfallende Flanke in Abbildung \ref{fig:freq}.

\subsection{Umkehr-Integrator}%
\label{sub:umkehr_integrator}

Durch Rückkopplung des Ausgangsstrom über ein Kondensator lässt sich die
Eingangsspannung $U_1$ integrieren (vergleiche Abbildung \ref{fig:integrator}).
\begin{figure}[h]
		\centering
		\includegraphics[width=0.5\linewidth]{build/umkehr_integrator.pdf}
		\caption{Umkehrgenerator \cite{anleitung}}
		\label{fig:integrator}
\end{figure}
Die Rückkopplung funktioniert in Äquivalenz zum Linearverstärker.
Die Ladung auf dem Kondensator entspricht dem Produkt aus der Ausgangsspannung
$U_\text{A}$ und der Kapazität $C$.
\begin{equation}
		\int I_\text{C} \, dt = C U_\text{A}
\end{equation}
Unter der Vernachlässigung des Operationsverstärkerstroms $I_\text{OV}$ gilt
für den Knotenpunkt A:
\begin{align}
		0 = \sum_i I_i =& I_1 + I_\text{OV} + I_\text{C} \\
		=& \frac{U_1(t)}{R} + 0 + C \cdot \frac{d U_\text{A}(t)}{dt}
\end{align}
Unter Berücksichtigung das die Eingangsspannung von der Zeit abhängt (z.B.
Sinusförmig $U_1(t)= U_0 \cos(\omega t)$) ergibt sich die Integration der Eingangsspannung $U_1$ nach
der Zeit.
\begin{align}
		U_\text{A}(t) &= - \frac{1}{RC} \int U_\text{1}(t) \, dt \\
				   &= \frac{U_0}{\omega R C} \cos (\omega t)
\end{align}
Für eine sinusförmige Eingangsspannung fällt die Verstärkung daher linear mit 
der Frequenz.
Im allgemeinen können beliebig Funktionen integriert werden, wobei es bei
Unstetigkeiten zu Überschwingungen kommen kann (Gibbs'sches Phänomen).

\subsection{Umkehr-Differentiator}%
\label{sub:umkehr_differentiator}
Äquivalent zum Integrator lässt sich durch austauschen der Kapazität durch
den Widerstand vice versa die Eingangsspannung Differenzieren.
Ein Schaltbild des Umkehr-Differentiator ist in Abbildung \ref{fig:diff} zu
sehen.
\begin{figure}[h]
		\centering
		\includegraphics[width=0.5\linewidth]{build/umkehr_diff.pdf}
		\caption{um \cite{anleitung}}
		\label{fig:diff}
\end{figure}
Für den Knotenpunkt vor dem nicht-invertierenden gilt nach der ersten
Kirchhoff'schen Regel:
\begin{equation}
		C \frac{d U_1(t)}{dt} + \frac{U_A(t)}{R} = 0
\end{equation}
Durch umstellen und einmaliges differenzieren ergibt sich beispielsweise für
eine sinusförmige Eingangsspannung $U_1(t)$.
\begin{align}
		U_\text{A}(t) &= - RC \frac{dU_1(t)}{dt} \\
				   &= - \omega R C U_0 \cos(\omega t)
\end{align}
Beim Differenzieren wächst die Verstärkung bei einer sinusförmigen
Eingangsspannung linear mit der Frequenz.

\subsection{Schmitt-Trigger}%
\label{sub:schmitt_trigger}

Beim Schmitt-Trigger wird ein Teil der Ausgangsspannung auf den nicht
invertierten Eingang zurück gegeben.
Es lässt sich für den Knoten vor dem rückgekoppelten Eingang die Gleichung 
\begin{equation}
		\frac{U_1}{R_1} + \frac{U_\text{A}}{R_\text{p}} = 0
\end{equation}
aufstellen.
Sobald die Ausgangsspannung $U_\text{A}$ den Sättigungswert $U_\text{B}$ erreicht kommt es zur
Verstärkung wenn 
\begin{equation}
		\label{eq:schmitt}
		U_1 > \frac{R_1}{R_\text{P}} U_\text{B} \ .
\end{equation}
Die Rückgekoppelte Spannung ist nun grösser als die Angelegte und der Schalter
kippt auf den Wert $U_\text{B}$.
\begin{figure}[h]
		\centering
		\includegraphics[width=0.5\linewidth]{build/schmitt_trigger.pdf}
		\caption{Schmitt \cite{anleitung}}
		\label{fig:}
\end{figure}
Schmitt-Trigger werden zur Erzeugung von Binären Signalen und der
Signalverstärkung genutzt.

\subsection{Signalgenerator}%
\label{sub:signalgenerator}
Durch das Betreiben des Schmitt-Triggers mit einer Sinus-Spannung wird bei
entsprechender Wahl der Widerstände am Ausgang ein Rechtecksignal erzeugt.
Der Ausgang des Schmitt-Triggers wird auf den Eingang eines daran anschließenden
Integrator gelegt. 
\begin{figure}[h]
		\centering
		\includegraphics[width=0.8\linewidth]{build/dreiecksgen.pdf}
		\caption{ \cite{anleitung}}
		\label{fig:}
\end{figure}
Durch die Integration eines Rechtecksignals wird aus diesem ein Dreieck-Signal
welches am Ausgang des Integrators abgenommen werden kann.
Die Periode der Dreiecks- und Rechtecks-Spannung ist durch die Periode der
Eingangsspannung $U_1$ festgelegt.

\subsection{Gedämpfte Sinusschwingung}%
\label{sub:gedaempfte_sinusschwingung}
Zur Erzeugung einer zu-/abnehmenden Schwingung werden drei Operationsverstärker
benötigt.
Dabei dienen Zwei der Integration und ein weiterer der Invertierung
des Signals für die Rückkopplung.
\begin{figure}[h]
		\centering
		\includegraphics[width=0.8\linewidth]{build/schwingungsdiffgl.pdf}
		\caption{ \cite{anleitung}}
		\label{fig:}
\end{figure}

Auf den nicht invertierten Eingang des ersten Operationsverstärker wird der
Ausgang des letzten gelegt.
Dieser Integriert das Ausgangssignal $U_A$ und gibt sein Ausgangsspannung $U_1$ auf
den Eingang des zweiten Operationsverstärkers welcher ebenfalls das Signal
integriert.
\begin{equation}
		\label{eq:ov2}
		U_2 = - \frac{1}{RC} \int \left( U_1 + \frac{\eta}{10} U_\text{A} \right) \, dt
\end{equation}
Desweiteren wird ein Teil des Ausgangssignal $U_\text{A}$ auf den Eingang des
zweiten Operationsverstärkers gelegt, sodass dieser linear mit $\eta$ gedämpft wird.
Der dritte Operationsverstärker invertiert das Vorzeichen, sodass die
Ausgangsspannung durch einen Differentialgleichung 2. Ordnung mit linearer
Rückstellkraft beschrieben werden kann,
\begin{equation}
		\label{eq:schwingung_diff}
		\frac{d^2 U_\text{A}}{dt^2} - \frac{\eta}{10 R C} \frac{d
		U_\text{A}}{dt} + \frac{1}{(RC)^2} U_\text{A} = 0
\end{equation}
dessen Lösung 
\begin{equation}
		U_\text{A}(t) = U_0 \exp \left( \frac{\eta t}{20 RC} \right) 
		\sin \left(\frac{t}{RC}\right)
\end{equation}
ist.
Die Schwingungsdauer $T$ kann dem Sinus- und die Abklingdauer $\tau$ kann dem
Exponentailterm entnommen werden.
